{% extends 'base.html' %}

{% block content %}
{% load static %}
<!-- Page Header-->
<header class="masthead" style="background-image: url('../../static/assets/img/house-search.jpg')">
    <div class="container position-relative px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">
                <div class="site-heading">
                    <h1>Search</h1>
                    <span class="subheading">부동산 가격 조회</span>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Main Content-->
<main>

    <div class="container-fluid">
        <div class="row">
            <!--sidebar-->
            <div class="col-lg-2" style="width: 450px;">
                <div class="flex-shrink-0 p-3 bg-white" style="width: 280px;">
                    <a href="{% url 'search:search' %}" class="d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom">
                      <svg class="bi me-2" width="30" height="24"></svg>
                      <span class="fs-3 fw-bold">Search</span>
                    </a>
                    <ul class="list-unstyled ps-0">
                      <li class="mb-1">
                        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse"
                                data-bs-target="#search" aria-expanded="true">
                              <h5>부동산 가격 검색</h5>
                        </button>
                        <div class="collapse" id="search">
                            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <hr class="my-1" />
                                <li><a href="{% url 'search:search' %}" class="link-dark rounded"><h6>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- 전월세</h6></a></li>
                                <li><a href="{% url 'search:sales' %}" class="link-dark rounded"><h6>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- 매매</h6></a></li>
                            </ul>
                        </div>
                      </li>
                      <li class="mb-1">
                        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse"
                                data-bs-target="#analysis" aria-expanded="false">
                            <a href="{% url 'search:analysis' %}">
                                <h5>부동산 가격 분석</h5>
                            </a>
                        </button>
                      </li>
                    </ul>
                </div>
            </div>
            <!--context-->
            <div class="col" style="width:1100px">
                <!--searchbar-->
                <div class="card mb-4 mx-5" style="width:1050px">
                    <!-- Divider-->
                    <hr class="my-4" />
                    <span class="text-center">
                        <h2>Search for 전월세 건물</h2>
                    </span>
                    <div class="container px-4 px-lg-5">
                        <form action="" method="get">
                            <!-- keyword-trade search  -->
                            <div class="form-group">
                                <h5>거래형태</h5>
                                <select class="form-control" name="trade">
                                    <option>전월세</option>
                                </select>
                                <!-- Divider-->
                                <hr class="my-6" />
                            </div>
                            <!-- keyword-region1 search  -->
                            <div class="form-group">
                                <h5>시/도</h5>
                                <select class="form-control kw1" name="region1">
                                    <option selected="true" disabled="disabled">Region1</option>
                                    {% for kw1 in reg1_list %}
                                        <option value="{{kw1|default_if_none:'' }}">{{kw1}}</option>
                                    {% endfor %}
                                </select>
                                <!-- Divider-->
                                <hr class="my-6" />
                            </div>
                            <!-- keyword-region2 search  -->
                            <div class="form-group">
                                <h5>시/군/구</h5>
                                <select class="form-control kw2" id="region2">
                                    <option selected="true" disabled="disabled">region2</option>

                                        <option value="{{kw1}}">{{kw1}}</option>

                                </select>
                                <!-- Divider-->
                                <hr class="my-6" />
                            </div>
                            <!-- keyword-region3 search  -->
                            <h5>읍/면/동</h5>
                            <div class="form-group">
                                <select class="form-control search-fields" name="region2">
                                    <option selected="true" disabled="disabled">region3</option>
                                    {% for region3 in search_region3 %}
                                        <option value="{{region3}}">{{region3}}</option>
                                    {% endfor %}
                                </select>
                                <!-- Divider-->
                                <hr class="my-6" />
                            </div>
                            <div class="form-group">
                                <button type="button" class="btn btn-secondary btn-lg btn-block" style="width:951px">
                                    <i class="fa fa-search"></i>
                                    Search
                                </button>
                                <p></p>
                            </div>
                        </form>
                    </div>
                </div>

                <!--search result table-->
                <table class="table mb-4 mx-5" style="width:1050px">
                    <thead>
                        <tr class="text-center thead-dark">
                            <th>번호</th>
                            <th style="width:45%">건물이름</th>
                            <th>평수</th>
                            <th style="width:30%">가격</th>
                        </tr>
                    </thead>
                    <tbody>

                            <tr class="text-center">
                                <td>1</td>
                                <td class="text-left">
                                    테스트 아파트
                                </td>
                                <!-- 글쓴이 추가 -->
                                <td>60m^2이상</td>
                                <td>3,000,000,000</td>
                            </tr>
<!--                    {% if question_list %}-->
<!--                        {% for question in question_list %}-->
<!--                        {% endfor %}-->
<!--                    {% else %}-->
<!--                        <tr>-->
<!--                            <td colspan="3">질문이 없습니다.</td>-->
<!--                        </tr>-->
<!--                    {% endif %}-->
                    </tbody>
                </table>

            </div>
        </div>
    </div>
</main>
            <!-- Divider-->
            <hr class="my-4" />
        </div>
    </div>
</div>

{% endblock %}


{% block script %}
<script type="text/javascript">
$(document).ready(function(){
    $("#region1").on('select', function() {
        $("#kw1").val($(".kw1").val());
        $("#region2").submit();
    });
});
</script>
{% endblock%}
